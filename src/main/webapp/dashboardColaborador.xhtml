<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="jakarta.faces.core"
      xmlns:ui="jakarta.faces.facelets">
    <h:head>
        <title>Dashboard Colaborador</title>
        <h:outputStylesheet library="css" name="custom.css"/>
    </h:head>
    <h:body>
        <div class="layout">
            <ui:include src="/WEB-INF/includes/navbar.xhtml"/>
            <div class="content-with-sidebar">
                <ui:include src="/WEB-INF/includes/sidebar.xhtml"/>
                <main class="main-content">
                    <h2>Bienvenido, #{loginBean.colaboradorLogueado.nombreColab} #{loginBean.colaboradorLogueado.apellidoColab}!</h2>
                    <h3>Resumen de Solicitudes</h3>
                    <div class="kpi-cards">
                        <div class="kpi-card">
                            <span class="kpi-label">Total</span>
                            <span class="kpi-value">#{dashboardBean.kpi('total')}</span>
                        </div>
                        <div class="kpi-card">
                            <span class="kpi-label">Abiertas</span>
                            <span class="kpi-value">#{dashboardBean.kpi('A')}</span>
                        </div>
                        <div class="kpi-card">
                            <span class="kpi-label">Asignadas</span>
                            <span class="kpi-value">#{dashboardBean.kpi('B')}</span>
                        </div>
                        <div class="kpi-card">
                            <span class="kpi-label">Programado</span>
                            <span class="kpi-value">#{dashboardBean.kpi('C')}</span>
                        </div>
                        <div class="kpi-card">
                            <span class="kpi-label">Pendientes</span>
                            <span class="kpi-value">#{dashboardBean.kpi('P')}</span>
                        </div>
                        <div class="kpi-card">
                            <span class="kpi-label">Solucionadas</span>
                            <span class="kpi-value">#{dashboardBean.kpi('S')}</span>
                        </div>
                        <div class="kpi-card">
                            <span class="kpi-label">Anuladas</span>
                            <span class="kpi-value">#{dashboardBean.kpi('N')}</span>
                        </div>
                    </div>

                    <h3 style="margin-top:2rem;">Tablero Kanban de Solicitudes</h3>
                    <div class="kanban-board">
                        <!-- Columna Abiertas -->
                        <div class="kanban-column">
                            <div class="kanban-title">Abiertas</div>
                            <ui:repeat value="#{dashboardBean.ticketsPorEstado['A']}" var="ticket">
                                <div class="kanban-card">
                                    <b>#{ticket.asunto}</b>
                                    <div class="estado">Prioridad: #{ticket.prioridad}</div>
                                    <div><b>Motivo:</b> #{ticket.motivo}</div>
                                    <!-- Agrega mÃ¡s campos si quieres -->
                                </div>
                            </ui:repeat>
                        </div>
                        <!-- Columna Asignadas -->
                        <div class="kanban-column">
                            <div class="kanban-title">Asignadas</div>
                            <ui:repeat value="#{dashboardBean.ticketsPorEstado['B']}" var="ticket">
                                <div class="kanban-card">
                                    <b>#{ticket.asunto}</b>
                                    <div class="estado">Prioridad: #{ticket.prioridad}</div>
                                    <div><b>Motivo:</b> #{ticket.motivo}</div>
                                </div>
                            </ui:repeat>
                        </div>
                        <!-- Columna Programado -->
                        <div class="kanban-column">
                            <div class="kanban-title">Programado</div>
                            <ui:repeat value="#{dashboardBean.ticketsPorEstado['C']}" var="ticket">
                                <div class="kanban-card">
                                    <b>#{ticket.asunto}</b>
                                    <div class="estado">Prioridad: #{ticket.prioridad}</div>
                                    <div><b>Motivo:</b> #{ticket.motivo}</div>
                                </div>
                            </ui:repeat>
                        </div>
                        <!-- Columna Pendientes -->
                        <div class="kanban-column">
                            <div class="kanban-title">Pendientes</div>
                            <ui:repeat value="#{dashboardBean.ticketsPorEstado['P']}" var="ticket">
                                <div class="kanban-card">
                                    <b>#{ticket.asunto}</b>
                                    <div class="estado">Prioridad: #{ticket.prioridad}</div>
                                    <div><b>Motivo:</b> #{ticket.motivo}</div>
                                </div>
                            </ui:repeat>
                        </div>
                        <!-- Columna Solucionadas -->
                        <div class="kanban-column">
                            <div class="kanban-title">Solucionadas</div>
                            <ui:repeat value="#{dashboardBean.ticketsPorEstado['S']}" var="ticket">
                                <div class="kanban-card">
                                    <b>#{ticket.asunto}</b>
                                    <div class="estado">Prioridad: #{ticket.prioridad}</div>
                                    <div><b>Motivo:</b> #{ticket.motivo}</div>
                                </div>
                            </ui:repeat>
                        </div>
                        <!-- Columna Anuladas -->
                        <div class="kanban-column">
                            <div class="kanban-title">Anuladas</div>
                            <ui:repeat value="#{dashboardBean.ticketsPorEstado['N']}" var="ticket">
                                <div class="kanban-card">
                                    <b>#{ticket.asunto}</b>
                                    <div class="estado">Prioridad: #{ticket.prioridad}</div>
                                    <div><b>Motivo:</b> #{ticket.motivo}</div>
                                </div>
                            </ui:repeat>
                        </div>
                    </div>

                </main>
            </div>
        </div>
    </h:body>
</html>
